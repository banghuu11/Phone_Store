<!-- fragments/create_product.html -->
<div th:fragment="content">
  <div class="p-6 bg-white rounded shadow">
    <h2 class="text-2xl font-bold mb-4 text-blue-600" th:text="${isEdit} ? 'Ch·ªânh s·ª≠a s·∫£n ph·∫©m' : 'Th√™m s·∫£n ph·∫©m m·ªõi'">
      Th√™m s·∫£n ph·∫©m m·ªõi
    </h2>

    <!-- Th√¥ng b√°o l·ªói n·∫øu c√≥ -->
    <div th:if="${error}" class="mb-4 text-red-600 font-semibold" th:text="${error}"></div>

    <!-- Form s·∫£n ph·∫©m -->
 <form
  th:attr="hx-post=${isEdit} ? '/admin/fragment/products/edit/' + ${product.productId} : '/admin/fragment/products/create'"
  hx-target="#section-content"
  hx-swap="innerHTML"
  th:object="${product}">


      <!-- T√™n s·∫£n ph·∫©m -->
      <div class="mb-4">
        <label class="block mb-1">T√™n s·∫£n ph·∫©m:</label>
        <input type="text" th:field="*{name}" required class="w-full border px-3 py-2 rounded" />
      </div>

      <!-- Th∆∞∆°ng hi·ªáu -->
      <div class="mb-4">
        <label class="block mb-1">Th∆∞∆°ng hi·ªáu:</label>
        <input type="text" th:field="*{brand}" class="w-full border px-3 py-2 rounded" />
      </div>

      <!-- Danh m·ª•c -->
      <div class="mb-4">
        <label class="block mb-1">Danh m·ª•c:</label>
        <select th:field="*{category.categoryId}" class="w-full border px-3 py-2 rounded" required>
          <option value="" disabled>-- Ch·ªçn danh m·ª•c --</option>
          <option th:each="cat : ${categories}" th:value="${cat.categoryId}" th:text="${cat.name}"></option>
        </select>
      </div>

      <!-- Gi√° -->
      <div class="mb-4">
        <label class="block mb-1">Gi√°:</label>
        <input type="number" th:field="*{price}" step="0.01" required class="w-full border px-3 py-2 rounded" />
      </div>

      <!-- Gi·∫£m gi√° -->
      <div class="mb-4">
        <label class="block mb-1">Gi·∫£m gi√° (%):</label>
        <input type="number" th:field="*{discount}" step="0.01" class="w-full border px-3 py-2 rounded" />
      </div>

      <!-- T·ªìn kho -->
      <div class="mb-4">
        <label class="block mb-1">T·ªìn kho:</label>
        <input type="number" th:field="*{stock}" class="w-full border px-3 py-2 rounded" />
      </div>

      <!-- M√¥ t·∫£ -->
      <div class="mb-4">
        <label class="block mb-1">M√¥ t·∫£:</label>
        <textarea th:field="*{description}" rows="4" class="w-full border px-3 py-2 rounded"
                  placeholder="M√¥ t·∫£ chi ti·∫øt s·∫£n ph·∫©m"></textarea>
      </div>

      <!-- ·∫¢nh URL -->
      <div class="mb-4">
        <label class="block mb-1">URL ·∫¢nh:</label>
        <input type="text" th:field="*{imageUrl}" class="w-full border px-3 py-2 rounded" />
        <div th:if="${product.imageUrl != null and !product.imageUrl.isEmpty()}" class="mt-2">
          <img th:src="@{${product.imageUrl}}" alt="·∫¢nh s·∫£n ph·∫©m" class="w-24 h-24 object-cover border rounded" />
        </div>
      </div>

      <!-- Tr·∫°ng th√°i -->
      <div class="mb-4">
        <label class="block mb-1">Tr·∫°ng th√°i:</label>
        <select th:field="*{status}" class="w-full border px-3 py-2 rounded">
          <option value="1">Hi·ªÉn th·ªã</option>
          <option value="0">·∫®n</option>
        </select>
      </div>

      <!-- C√°c n√∫t thao t√°c -->
      <div class="flex space-x-2 mt-6">
        <!-- N√∫t L∆∞u -->
        <button type="submit" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">
          üíæ <span th:text="${isEdit} ? 'C·∫≠p nh·∫≠t' : 'T·∫°o m·ªõi'">L∆∞u</span>
        </button>

        <!-- N√∫t Quay l·∫°i -->
        <button type="button"
                class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600"
                hx-get="/admin/fragment/products"
                hx-target="#section-content"
                hx-swap="innerHTML">
          üîô Quay l·∫°i
        </button>

        <!-- N√∫t Xo√° (ch·ªâ khi ch·ªânh s·ª≠a) -->
        <button type="button"
                th:if="${isEdit}"
                th:attr="hx-post=@{/admin/fragment/products/delete/{id}(id=${product.productId})}"
                hx-confirm="B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën xo√° s·∫£n ph·∫©m n√†y kh√¥ng?"
                hx-target="#section-content"
                hx-swap="innerHTML"
                class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700">
          üóëÔ∏è Xo√°
        </button>
      </div>
    </form>
  </div>
</div>
