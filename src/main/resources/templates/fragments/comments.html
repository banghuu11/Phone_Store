<!-- src/main/resources/templates/admin/fragments/admin-comments.html -->
<div th:fragment="content">
    <h1 class="text-3xl font-bold text-purple-700 mb-4">Quản lý bình luận</h1>

    <table class="min-w-full text-sm divide-y divide-gray-200 bg-white rounded shadow">
        <thead class="bg-purple-600 text-white">
        <tr>
            <th class="px-4 py-2">ID</th>
            <th class="px-4 py-2">Sản phẩm</th>
            <th class="px-4 py-2">Người dùng</th>
            <th class="px-4 py-2">Nội dung</th>
            <th class="px-4 py-2">Phản hồi (Admin)</th>
            <th class="px-4 py-2">Ngày gửi</th>
            <th class="px-4 py-2">Thao tác</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="comment : ${comments}">
            <td class="px-4 py-2" th:text="${comment.id}">1</td>
            <td class="px-4 py-2" th:text="${comment.product.name}">Điện thoại</td>
            <td class="px-4 py-2" th:text="${comment.username}">user1</td>
            <td class="px-4 py-2" th:text="${comment.content}">Sản phẩm tốt</td>
            <td class="px-4 py-2">
                <form th:action="@{/admin/comments/reply/{id}(id=${comment.id})}" method="post" class="flex gap-2"
                      th:hx-post="@{/admin/comments/reply/{id}(id=${comment.id})}"
                      hx-target="#section-content" hx-swap="innerHTML">
                    <input type="text" name="reply" th:value="${comment.adminReply}" class="border px-2 py-1 rounded w-full" placeholder="Nhập phản hồi..." />
                    <button type="submit" class="bg-purple-600 text-white px-3 py-1 rounded hover:bg-purple-700">Gửi</button>
                </form>
            </td>
            <td class="px-4 py-2" th:text="${#temporals.format(comment.createdAt, 'dd/MM/yyyy HH:mm')}">21/06/2025</td>
            <td class="px-4 py-2 text-center">
                <form th:action="@{/admin/comments/delete/{id}(id=${comment.id})}" method="post"
                      th:hx-post="@{/admin/comments/delete/{id}(id=${comment.id})}"
                      hx-target="#section-content" hx-swap="innerHTML" hx-confirm="Xác nhận xóa bình luận này?">
                    <button class="text-red-600 hover:underline">Xóa</button>
                </form>
            </td>
        </tr>
        <tr th:if="${#lists.isEmpty(comments)}">
            <td colspan="7" class="text-center text-gray-400 py-8">Không có bình luận nào.</td>
        </tr>
        </tbody>
    </table>
</div>
