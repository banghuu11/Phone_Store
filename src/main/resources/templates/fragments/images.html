<div xmlns:th="http://www.thymeleaf.org" th:fragment="content">
  <script src="https://unpkg.com/htmx.org@1.9.10"></script>

  <div class="max-w-6xl mx-auto px-4 py-10">
    <div class="flex items-center justify-between mb-6">
      <h1 class="text-3xl font-bold text-blue-700">Quản lý ảnh sản phẩm</h1>

      <button class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg shadow transition-colors"
              hx-get="/admin/fragment/images/create"
              hx-target="#section-content"
              hx-swap="innerHTML">
        ➕ Thêm ảnh
      </button>
    </div>

    <!-- Thông báo -->
    <div th:if="${success}" class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4">
      <span th:text="${success}"></span>
    </div>
    <div th:if="${error}" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
      <span th:text="${error}"></span>
    </div>

    <div class="overflow-x-auto border rounded-lg shadow bg-white">
      <table class="min-w-full text-sm divide-y divide-gray-200">
        <thead class="bg-blue-600 text-white">
          <tr>
            <th class="px-4 py-3 text-center">ID</th>
            <th class="px-4 py-3 text-center">Sản phẩm</th>
            <th class="px-4 py-3 text-center">Ảnh</th>
            <th class="px-4 py-3 text-center">Chú thích</th>
            <th class="px-4 py-3 text-center">Hành động</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-100">
          <tr th:each="img : ${images}" class="hover:bg-gray-50">
            <td class="px-4 py-2 text-center font-semibold text-blue-700" th:text="${img.imageId}"></td>
            <td class="px-4 py-2 text-center" th:text="${img.product?.name}"></td>
            <td class="px-4 py-2 text-center">
              <img th:src="@{${img.url}}" alt="Ảnh" class="w-16 h-16 object-cover border rounded mx-auto" />
            </td>
            <td class="px-4 py-2 text-center" th:text="${img.caption}"></td>
            <td class="px-4 py-2">
              <div class="flex justify-center gap-2">
                <button type="button"
                        class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-xs shadow transition"
                        th:hx-post="@{/admin/fragment/images/delete/{id}(id=${img.imageId})}"
                        hx-target="#section-content"
                        hx-swap="innerHTML"
                        hx-confirm="Bạn có chắc chắn muốn xóa ảnh này không?">
                  Xóa
                </button>
              </div>
            </td>
          </tr>
          <tr th:if="${#lists.isEmpty(images)}">
            <td colspan="5" class="text-center text-gray-400 py-8">Chưa có ảnh nào.</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div> 