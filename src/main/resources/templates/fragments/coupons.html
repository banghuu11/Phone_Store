<div th:fragment="content">
    <h2 class="text-2xl font-bold mb-6 text-indigo-700 text-center">üìã Danh s√°ch Phi·∫øu gi·∫£m gi√°</h2>

    <!-- Th√¥ng b√°o -->
    <div th:if="${success}" class="bg-green-100 text-green-700 px-4 py-2 rounded mb-4" th:text="${success}"></div>
    <div th:if="${error}" class="bg-red-100 text-red-700 px-4 py-2 rounded mb-4" th:text="${error}"></div>

    <!-- N√∫t t·∫°o m·ªõi -->
    <div class="flex justify-end mb-4">
        <a hx-get="/admin/coupons/create"
           hx-target="#section-content"
           hx-swap="innerHTML"
           class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition">
            ‚ûï T·∫°o Phi·∫øu M·ªõi
        </a>
    </div>

    <!-- B·∫£ng danh s√°ch -->
    <div class="overflow-x-auto">
        <table class="min-w-full bg-white shadow rounded border">
            <thead class="bg-gray-100 text-gray-800">
            <tr>
                <th class="px-4 py-2 text-left">M√£</th>
                <th class="px-4 py-2 text-left">M√¥ t·∫£</th>
                <th class="px-4 py-2 text-center">% Gi·∫£m</th>
                <th class="px-4 py-2 text-right">T·ªëi ƒëa (‚Ç´)</th>
                <th class="px-4 py-2 text-right">T·ªëi thi·ªÉu (‚Ç´)</th>
                <th class="px-4 py-2 text-center">Gi·ªõi h·∫°n</th>
                <th class="px-4 py-2 text-center">B·∫Øt ƒë·∫ßu</th>
                <th class="px-4 py-2 text-center">K·∫øt th√∫c</th>
                <th class="px-4 py-2 text-center">Tr·∫°ng th√°i</th>
                <th class="px-4 py-2 text-center">Thao t√°c</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="coupon : ${coupons}" class="border-b hover:bg-gray-50">
                <td class="px-4 py-2 font-medium" th:text="${coupon.code}"></td>
                <td class="px-4 py-2" th:text="${coupon.description}"></td>
                <td class="px-4 py-2 text-center" th:text="${coupon.discountPercent + '%'}"></td>
                <td class="px-4 py-2 text-right" th:text="${#numbers.formatDecimal(coupon.maxDiscount, 0, 'COMMA', 0, 'POINT')} + ' ‚Ç´'"></td>
                <td class="px-4 py-2 text-right" th:text="${#numbers.formatDecimal(coupon.minOrderValue, 0, 'COMMA', 0, 'POINT')} + ' ‚Ç´'"></td>
                <td class="px-4 py-2 text-center" th:text="${coupon.usageLimit}"></td>
                <td class="px-4 py-2 text-center" th:text="${#temporals.format(coupon.startDate, 'dd/MM/yyyy')}"></td>
                <td class="px-4 py-2 text-center" th:text="${#temporals.format(coupon.endDate, 'dd/MM/yyyy')}"></td>
                <td class="px-4 py-2 text-center font-semibold"
                    th:text="${coupon.status} ? 'üü¢ Hi·ªáu l·ª±c' : 'üî¥ T·∫°m ng∆∞ng'"></td>
                <td class="px-4 py-2 text-center space-x-2">
                    <!-- N√∫t s·ª≠a -->
                    <a th:attr="hx-get=@{/admin/coupons/edit/{id}(id=${coupon.couponId})}"
                       hx-target="#section-content"
                       hx-swap="innerHTML"
                       href="#"
                       class="text-blue-600 hover:underline">‚úèÔ∏è</a>

                    <!-- N√∫t xo√° -->
                    <form th:action="@{/admin/coupons/delete/{id}(id=${coupon.couponId})}" method="post"
                          class="inline-block"
                          onsubmit="return confirm('B·∫°n ch·∫Øc ch·∫Øn mu·ªën xo√° phi·∫øu n√†y?')">
                        <button type="submit" class="text-red-600 hover:underline">üóëÔ∏è</button>
                    </form>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
