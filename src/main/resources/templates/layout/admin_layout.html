  <!DOCTYPE html>
  <html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" lang="vi">

  <head>
    <meta charset="UTF-8">
    <title layout:title-pattern="TITLE - Admin" th:text="${title} ?: 'Admin Dashboard'">Admin Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <style>
      .active {
        background: #facc15 !important;
        color: #000 !important;
      }

      .htmx-request {
        opacity: 0.7;
      }

      .htmx-request .htmx-indicator {
        display: inline;
      }

      .htmx-indicator {
        display: none;
      }
    </style>
  </head>

  <body class="flex min-h-screen bg-gray-100" hx-boost="true">

    <!-- Sidebar -->
    <aside class="w-64 bg-gray-800 text-white flex-shrink-0 min-h-screen">
      <div class="p-4 text-2xl font-bold border-b border-gray-700">
        <span>ğŸ› ï¸ Admin</span>
      </div>
      <nav class="flex flex-col gap-1 py-4">
        <!-- Quáº£n lÃ½ ngÆ°á»i dÃ¹ng -->
        <button class="w-full text-left px-6 py-3 hover:bg-gray-700 nav-btn" hx-get="/admin/fragment/users"
          hx-target="#section-content" hx-swap="innerHTML" data-section="users">
          ğŸ‘¥ Quáº£n lÃ½ NgÆ°á»i dÃ¹ng
        </button>

        <!-- Quáº£n lÃ½ sáº£n pháº©m -->
        <div>
          <button class="w-full text-left px-6 py-3 hover:bg-gray-700 nav-btn flex justify-between items-center"
            onclick="toggleSubmenu('product-submenu')">
            <span>ğŸ“¦ Quáº£n lÃ½ Sáº£n pháº©m</span>
            <span id="arrow-product-submenu" class="transition-transform">â–¼</span>
          </button>
          <div id="product-submenu" class="ml-4 mt-1 hidden flex flex-col">
            <button class="text-left px-4 py-2 hover:bg-gray-700 nav-btn" hx-get="/admin/fragment/products"
              hx-target="#section-content" hx-swap="innerHTML" data-section="products">
              ğŸ“„ Danh sÃ¡ch Sáº£n pháº©m
            </button>

            <!-- Danh má»¥c sáº£n pháº©m -->
            <button class="text-left px-4 py-2 hover:bg-gray-700 nav-btn" hx-get="/admin/categories"
              hx-target="#section-content" hx-swap="innerHTML" data-section="categories">
              ğŸ—‚ï¸ Danh má»¥c Sáº£n pháº©m
            </button>
            <!-- Quáº£n lÃ½ áº£nh -->
            <button class="w-full text-left px-6 py-3 hover:bg-gray-700 nav-btn"
                    hx-get="/admin/fragment/images"
                    hx-target="#section-content"
                    hx-swap="innerHTML"
                    data-section="images">
              ğŸ–¼ï¸ Quáº£n lÃ½ áº¢nh
            </button>
          </div>
        </div>

        <!-- Quáº£n lÃ½ Ä‘Æ¡n hÃ ng -->
        <button class="w-full text-left px-6 py-3 hover:bg-gray-700 nav-btn" hx-get="/admin/fragment/orders"
          hx-target="#section-content" hx-swap="innerHTML" data-section="orders">
          ğŸ›’ Quáº£n lÃ½ ÄÆ¡n hÃ ng
        </button>


        <!-- Quáº£n lÃ½ bÃ¬nh luáº­n -->

        <button class="w-full text-left px-6 py-3 hover:bg-gray-700 nav-btn"
                hx-get="/admin/comments"
                hx-target="#section-content"
                hx-swap="innerHTML">
          ğŸ’¬ BÃ¬nh luáº­n Sáº£n pháº©m
        </button>
        <!-- Quáº£n lÃ½ phiáº¿u giáº£m giÃ¡ -->
        <button class="w-full text-left px-6 py-3 hover:bg-gray-700 nav-btn"
                hx-get="/admin/coupons"
                hx-target="#section-content"
                hx-swap="innerHTML"
                data-section="coupons">
          ğŸŸï¸ Phiáº¿u giáº£m giÃ¡
        </button>
        <!-- ÄÄƒng xuáº¥t -->
        <form th:action="@{/logout}" method="post" style="width:100%;">
          <button type="submit"
                  class="w-full text-left px-6 py-3 hover:bg-gray-700 nav-btn block text-sm">
            ÄÄƒng xuáº¥t
          </button>
        </form>

      </nav>
    </aside>

    <!-- Main content -->
    <main class="flex-1 bg-gray-100 p-6 relative">
      <!-- Loading indicator -->
      <div id="loading-indicator" class="htmx-indicator">
        <div class="fixed top-0 left-0 w-full h-1 bg-blue-500 z-50">
          <div class="h-full bg-blue-600 animate-pulse"></div>
        </div>
      </div>

      <!-- Khu vá»±c ná»™i dung Ä‘á»™ng -->
      <section id="section-content">
        <!-- Máº·c Ä‘á»‹nh náº¿u chÆ°a chá»n gÃ¬ -->
        <div class="text-center py-20">
          <div class="text-6xl mb-4">ğŸ </div>
          <h2 class="text-2xl font-bold text-gray-700 mb-2">ChÃ o má»«ng Ä‘áº¿n vá»›i Admin Dashboard</h2>
          <p class="text-gray-500">Chá»n má»™t má»¥c tá»« sidebar Ä‘á»ƒ báº¯t Ä‘áº§u quáº£n lÃ½</p>
        </div>
      </section>
    </main>

    <!-- Script xá»­ lÃ½ active + submenu -->
    <script>
      function toggleSubmenu(id) {
        const submenu = document.getElementById(id);
        const arrow = document.getElementById('arrow-' + id);
        submenu.classList.toggle('hidden');
        arrow.classList.toggle('rotate-180');
      }

      document.addEventListener('DOMContentLoaded', function () {
        const buttons = document.querySelectorAll('.nav-btn');

        // Highlight má»¥c Ä‘Ã£ chá»n
        buttons.forEach(button => {
          button.addEventListener('click', function () {
            buttons.forEach(btn => btn.classList.remove('active'));
            this.classList.add('active');
            if (this.dataset.section) {
              localStorage.setItem('activeSection', this.dataset.section);
            }
          });
        });
        document.querySelector('form[action="/logout"]').addEventListener('submit', function() {
          localStorage.clear();
        });

        // KhÃ´i phá»¥c lá»±a chá»n menu trÆ°á»›c Ä‘Ã³
        const savedSection = localStorage.getItem('activeSection');
        if (savedSection) {
          const targetBtn = document.querySelector(`.nav-btn[data-section="${savedSection}"]`);
          if (targetBtn) {
            targetBtn.classList.add('active');
            targetBtn.click();
            if (savedSection.startsWith('product')) {
              toggleSubmenu('product-submenu');
            }
          }
        }
      });
    </script>

  </body>

  </html>